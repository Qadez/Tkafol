<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


	<ui:define name="mainContent">
		<h:form role="form">
			<div id="editModal" class="modal fade" role="dialog">
				<div class="modal-dialog">

					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">X</button>
							<h4 class="modal-title">Edit User </h4>
						</div>

						<div class="modal-body">
							<div class="form-group">
								<label>User Name</label>
								<h:inputText class="form-control" id="editNameInput"
									value="#{userService.newUser.userName}" />
									<label>password</label>
									<p:password  class="form-control" id="editPasswordInput"
									required="true"
									requiredMessage="please enter Password (UpperCase, LowerCase and Number) "
									validatorMessage="wrong password"
									value="#{userService.newUser.password}" >
									<f:validateRegex 									
								               pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$">        
								                 	
									</f:validateRegex>
									</p:password>
									<p:watermark for="editPasswordInput" value="password"></p:watermark>
									<p:message for="editPasswordInput"></p:message>
									
									
									<label> phone</label>
									<p:inputText class="form-control" id="editPhoneInput" 
									required="true"
									requiredMessage="Please enter your phone"
		                            validatorMessage="Invalid phone number"
									value="#{userService.newUser.phone}" >
									<f:validateRegex pattern="^[0-9-]{12,15}$"></f:validateRegex>
									</p:inputText>
									<p:watermark for="editPhoneInput" value="phone"></p:watermark>
									
									<p:message for="editPhoneInput"></p:message>
									
									<label>e_mail</label>
									<p:inputText class="form-control" id="editEmailInput"	
									requiredMessage="Please enter your email address."
		                            validatorMessage="Invalid email format"								
									value="#{userService.newUser.email}" 
									required="true">
									
									
									<f:validateRegex
		                                             pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
									</p:inputText>
									<p:watermark for="editEmailInput" value="e-mail"></p:watermark>
									
									<p:message for="editEmailInput"></p:message>
									
									
									
									<label> <BR />Address</label>
									<h:inputText class="form-control" id="editAddressInput"
									value="#{userService.newUser.address}" />
								<p class="help-block">Edit User Name And Click Save.</p>
							</div>
						</div>

						<div class="modal-footer">
							<!-- <h:form role="form"> -->
							<h:commandLink type="button" class="btn btn-primary"
								action="#{userService.updateUser()}">Save</h:commandLink>
							<!-- 			</h:form> -->
						</div>

					</div>

				</div>
			</div>
			<div id="addModal" class="modal fade" role="dialog">
				<div class="modal-dialog">

					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">X</button>
							<h4 class="modal-title">Add User </h4>
						</div>

						<div class="modal-body">
							<div class="form-group">
								<label>User Name</label>
								<h:inputText class="form-control" id="addNameInput"
									value="#{userService.newUser.userName}" />
									<label>password</label>
									<p:password  class="form-control" id="addPasswordInput"
									required="true"
									requiredMessage="please enter Password (UpperCase, LowerCase and Number) "
									validatorMessage="wrong password"
									value="#{userService.newUser.password}" >
									<f:validateRegex 									
								               pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$">        
								                 	
									</f:validateRegex>
									</p:password>
									<p:watermark for="addPasswordInput" value="password"></p:watermark>
									<p:message for="addPasswordInput"></p:message>
									
									
									<label> phone</label>
									<p:inputText class="form-control" id="addPhoneInput" 
									required="true"
									requiredMessage="Please enter your phone"
		                            validatorMessage="Invalid phone number"
									value="#{userService.newUser.phone}" >
									<f:validateRegex  pattern="^[0-9-]{12,15}$"></f:validateRegex>
									</p:inputText>
									<p:watermark for="addPhoneInput" value="phone"></p:watermark>
									
									<p:message for="addPhoneInput"></p:message>
									
									<label>e_mail</label>
									<p:inputText class="form-control" id="addEmailInput"	
									placeholder="please enter your e_mail adress"
								     requiredMessage="please enter your e_mail"
								     validatorMessage="invalid e_mail format"
		                            								
									value="#{userService.newUser.email}" 
									required="true">
									
										<f:validateRegex 
		                                             pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
									</p:inputText>
											<p:message  for="addEmailInput"></p:message>
																
									<label> <BR />Address</label>
									<h:inputText class="form-control" id="addAddressInput"
									value="#{userService.newUser.address}" />
				
								<p class="help-block">Enter The Value Of The User And
									Click Add .</p>
							</div>
						</div>

						<div class="modal-footer">
							<!-- <h:form role="form"> -->
							<h:commandLink type="button" class="btn btn-primary"
								action="#{userService.addNew()}">Add New </h:commandLink>
							<!-- 			</h:form> -->
						</div>

					</div>

				</div>
			</div>

			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">User Tables</div>
						<!-- /.panel-heading -->
						<div class="panel-body">
								<p:commandLink value="Add New"
										action="#{userService.initCurrent()}"
										styleClass="btn btn-success" update="@form" oncomplete="$('#addModal').modal('show')" />
								
							<h:dataTable width="100%" value="#{userService.users}"
								var="user"
								styleClass="table table-striped table-bordered table-hover"
								rowClasses="odd gradeA,even gradeA" id="distable">
								<h:column>
									<f:facet name="header">
									ID
									</f:facet>
									#{user.id}
								</h:column>
								
								<h:column>
									<f:facet name="header">
									Name
									</f:facet>
									#{user.userName}
								</h:column>
								<h:column>
									<f:facet name="header">
									password
									</f:facet>
									#{user.password}
								</h:column>
								<h:column>
									<f:facet name="header">
									phone
									</f:facet>
									#{user.phone}
								</h:column>
								<h:column>
									<f:facet name="header">
									e_mail
									</f:facet>
									#{user.email}
								</h:column>
								<h:column>
									<f:facet name="header">
									Address
									</f:facet>
									#{user.address}
								</h:column>
								<h:column>
									<f:facet name="header">
									Store Date
									</f:facet>
									#{user.storeDate}
								</h:column>
								<h:column  >
								<f:facet name="header">
								gender
								</f:facet>
								#{user.gender.name}
								</h:column>
								<h:column>
									<f:facet name="header">
									Delete
									</f:facet>
									<!-- <h:form role="form"> -->
									<h:commandLink class="btn btn-danger"
										action="#{userService.delete(user)}">Delete
										
										<f:ajax execute="@form" render="@form"/>
									</h:commandLink>
									<!-- </h:form> -->

								</h:column>
								<h:column>
									<f:facet name="header">
									Edit
									</f:facet>
									<p:commandLink value="Edit" type="button" 
										action="#{userService.updateCurrentUser(user)}"
										styleClass="btn btn-warning" oncomplete="$('#editModal').modal('show')" update="@form" />
									<!-- </h:form> -->

								</h:column>
							</h:dataTable>

							<!-- /.table-responsive -->
						</div>
						<!-- /.panel-body -->
					</div>
					<!-- /.panel -->
				</div>
				<!-- /.col-lg-12 -->
			</div>


		</h:form>
	</ui:define>

</ui:composition>


